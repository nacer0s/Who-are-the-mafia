# ๐ฎ ูุนุจุฉ ุงููุงููุง - ุฎุงุฏู ุฎููู ูุชูุงูู

## ๐ ูุตู ุงููุดุฑูุน

ูุนุจุฉ ุงููุงููุง ูู ุชุทุจูู ููุจ ุชูุงุนูู ูุชุนุฏุฏ ุงููุงุนุจูู ูุจูู ุจู Python Flask. ุชุฏุนู ุงููุนุจุฉ ุงูุฏุฑุฏุดุฉ ุงููุตูุฉ ูุงูุตูุชูุฉ ูุน ุฐูุงุก ุงุตุทูุงุนู ูุชุทูุฑ ูููุดู ุนู ุงูุบุด ูุชุญููู ุงูุฃุฏุงุก.

### โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

- ๐ญ **ุฃุฏูุงุฑ ูุชููุนุฉ**: ูุงููุงุ ููุงุทูุ ุทุจูุจุ ูุญููุ ุนุฏุงูุฉ ุดุนุจูุฉุ ุนูุฏุฉุ ููุฑุฌ
- ๐ฌ **ุฏุฑุฏุดุฉ ูุตูุฉ ูุตูุชูุฉ**: ุชูุงุตู ูุจุงุดุฑ ุจูู ุงููุงุนุจูู
- ๐ค **ุฐูุงุก ุงุตุทูุงุนู**: ูุดู ุชููุงุฆู ููุบุด ูุชุญููู ุงููุญุงุฏุซุงุช
- ๐ **ุฅุญุตุงุฆูุงุช ุชูุตูููุฉ**: ุชุชุจุน ุงูุฃุฏุงุก ูุชุญููู ุงูุงุณุชุฑุงุชูุฌูุงุช
- ๐ **ุฅุฏุงุฑุฉ ุงูุบุฑู**: ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุบุฑู ุงููุนุจ
- โก **ุงูููุช ุงููุนูู**: ุงุณุชุฎุฏุงู WebSocket ููุชุญุฏูุซุงุช ุงููุจุงุดุฑุฉ
- ๐ก๏ธ **ุฃูุงู ูุชูุฏู**: ุญูุงูุฉ ุถุฏ ุงูุชูุงุนุจ ูุงูุบุด

## ๐๏ธ ูููู ุงููุดุฑูุน

```
Who The Mafia/
โโโ ๐ models/              # ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ __init__.py
โ   โโโ user.py            # ูููุฐุฌ ุงููุณุชุฎุฏู
โ   โโโ room.py            # ูููุฐุฌ ุงูุบุฑูุฉ
โ   โโโ game.py            # ูููุฐุฌ ุงููุนุจุฉ
โ   โโโ player.py          # ูููุฐุฌ ุงููุงุนุจ
โ   โโโ message.py         # ูููุฐุฌ ุงูุฑุณุงุฆู
โ   โโโ game_log.py        # ุณุฌู ุฃุญุฏุงุซ ุงููุนุจุฉ
โ   โโโ statistics.py      # ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏููู
โโโ ๐ game/               # ููุทู ุงููุนุจุฉ
โ   โโโ __init__.py
โ   โโโ game_manager.py    # ูุฏูุฑ ุงูุฃูุนุงุจ ุงูุฑุฆูุณู
โ   โโโ room_manager.py    # ูุฏูุฑ ุงูุบุฑู
โ   โโโ role_manager.py    # ูุฏูุฑ ุงูุฃุฏูุงุฑ
โ   โโโ voting_manager.py  # ูุฏูุฑ ุงูุชุตููุช
โ   โโโ phase_manager.py   # ูุฏูุฑ ูุฑุงุญู ุงููุนุจุฉ
โโโ ๐ api/                # ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช
โ   โโโ __init__.py
โ   โโโ auth_routes.py     # ูุณุงุฑุงุช ุงูุชูุซูู
โ   โโโ game_routes.py     # ูุณุงุฑุงุช ุงููุนุจุฉ
โ   โโโ room_routes.py     # ูุณุงุฑุงุช ุงูุบุฑู
โ   โโโ stats_routes.py    # ูุณุงุฑุงุช ุงูุฅุญุตุงุฆูุงุช
โโโ ๐ websocket/          # ุฃุญุฏุงุซ ุงูููุช ุงููุนูู
โ   โโโ __init__.py
โ   โโโ game_events.py     # ุฃุญุฏุงุซ ุงููุนุจุฉ
โ   โโโ room_events.py     # ุฃุญุฏุงุซ ุงูุบุฑู
โ   โโโ chat_events.py     # ุฃุญุฏุงุซ ุงูุฏุฑุฏุดุฉ
โ   โโโ voice_events.py    # ุฃุญุฏุงุซ ุงูุตูุช
โโโ ๐ ai/                 # ูุญุฑูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู
โ   โโโ __init__.py
โ   โโโ message_analyzer.py # ูุญูู ุงูุฑุณุงุฆู
โ   โโโ speech_to_text.py   # ุชุญููู ุงูุตูุช ุฅูู ูุต
โ   โโโ game_analyzer.py    # ูุญูู ุงูุฃูุนุงุจ
โ   โโโ stats_analyzer.py   # ูุญูู ุงูุฅุญุตุงุฆูุงุช
โโโ ๐ static/             # ุงููููุงุช ุงูุซุงุจุชุฉ
โ   โโโ voice_messages/    # ุงูุฑุณุงุฆู ุงูุตูุชูุฉ
โโโ app.py                 # ุงูููู ุงูุฑุฆูุณู
โโโ config.py             # ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
โโโ requirements.txt      # ูุชุทูุจุงุช Python
โโโ .env                  # ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ README.md            # ูุฐุง ุงูููู
```

## ๐ ุงูุชุซุจูุช ูุงูุชุดุบูู

### 1. ูุชุทูุจุงุช ุงููุธุงู

- Python 3.8 ุฃู ุฃุญุฏุซ
- MySQL ุฃู SQLite
- ููุชุงุญ OpenAI API (ุงุฎุชูุงุฑู ููุฐูุงุก ุงูุงุตุทูุงุนู)

### 2. ุงุณุชูุณุงุฎ ุงููุดุฑูุน

```bash
git clone <repository-url>
cd "Who The Mafia"
```

### 3. ุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉ

```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate
```

### 4. ุชุซุจูุช ุงููุชุทูุจุงุช

```bash
pip install -r requirements.txt
```

### 5. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ูู ุจุชุญุฑูุฑ ููู `.env`:

```env
# ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
DATABASE_TYPE=mysql
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=your_password
MYSQL_DATABASE=mafia_game

# ุฅุนุฏุงุฏุงุช Flask
SECRET_KEY=your_secret_key_here
DEBUG=True
HOST=0.0.0.0
PORT=5000

# ุฅุนุฏุงุฏุงุช OpenAI (ุงุฎุชูุงุฑู)
OPENAI_API_KEY=your_openai_api_key

# ุฅุนุฏุงุฏุงุช ุงููุนุจุฉ
MIN_PLAYERS=4
MAX_PLAYERS=20
```

### 6. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงุณุชุฎุฏุงู MySQL (ููุตู ุจู):

1. ุชุซุจูุช XAMPP ูู [ููุง](https://www.apachefriends.org/download.html)
2. ุชุดุบูู Apache ู MySQL ูู ููุญุฉ ุชุญูู XAMPP
3. ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ:
   ```sql
   CREATE DATABASE mafia_game CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

#### ุงุณุชุฎุฏุงู SQLite (ููุชุทููุฑ):

```env
DATABASE_TYPE=sqlite
```

### 7. ุชุดุบูู ุงูุชุทุจูู

```bash
python app.py
```

ุงูุฎุงุฏู ุณูุนูู ุนูู: `http://localhost:5000`

## ๐ฎ ููููุฉ ุงููุนุจ

### ุฅูุดุงุก ุญุณุงุจ

```bash
POST /api/auth/register
{
    "username": "player1",
    "display_name": "ุงููุงุนุจ ุงูุฃูู", 
    "password": "123456",
    "email": "player1@example.com"
}
```

### ุชุณุฌูู ุงูุฏุฎูู

```bash
POST /api/auth/login
{
    "username": "player1",
    "password": "123456"
}
```

### ุฅูุดุงุก ุบุฑูุฉ

```bash
POST /api/room/create
{
    "name": "ุบุฑูุฉ ุชุฌุฑูุจูุฉ",
    "max_players": 8,
    "min_players": 4,
    "allow_voice_chat": true
}
```

### ุงูุงูุถูุงู ูุบุฑูุฉ

```bash
POST /api/room/join
{
    "room_code": "ABC123",
    "password": "optional"
}
```

## ๐ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช

### ๐ ุงูุชูุซูู (`/api/auth`)

- `POST /register` - ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- `POST /login` - ุชุณุฌูู ุงูุฏุฎูู
- `POST /logout` - ุชุณุฌูู ุงูุฎุฑูุฌ
- `GET /profile` - ุงูููู ุงูุดุฎุตู
- `PUT /profile` - ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
- `POST /change-password` - ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

### ๐ ุงูุบุฑู (`/api/room`)

- `POST /create` - ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ
- `POST /join` - ุงูุงูุถูุงู ูุบุฑูุฉ
- `POST /leave` - ูุบุงุฏุฑุฉ ุงูุบุฑูุฉ
- `GET /my-room` - ุงูุบุฑูุฉ ุงูุญุงููุฉ
- `GET /public` - ุงูุบุฑู ุงูุนุงูุฉ
- `GET /<room_code>` - ูุนูููุงุช ุบุฑูุฉ
- `POST /<room_code>/ready` - ุชุนููู ุงูุงุณุชุนุฏุงุฏ

### ๐ฎ ุงููุนุจุฉ (`/api/game`)

- `POST /start` - ุจุฏุก ุงููุนุจุฉ
- `GET /status` - ุญุงูุฉ ุงููุนุจุฉ
- `POST /action` - ุชูููุฐ ุฅุฌุฑุงุก
- `POST /vote` - ุงูุชุตููุช
- `GET /player-info` - ูุนูููุงุช ุงููุงุนุจ

### ๐ ุงูุฅุญุตุงุฆูุงุช (`/api/stats`)

- `GET /my-stats` - ุฅุญุตุงุฆูุงุชู
- `GET /user/<user_id>` - ุฅุญุตุงุฆูุงุช ูุณุชุฎุฏู
- `GET /leaderboard` - ููุญุฉ ุงููุชุตุฏุฑูู
- `GET /global` - ุฅุญุตุงุฆูุงุช ุนุงูุฉ
- `GET /analyze-game/<game_id>` - ุชุญููู ูุนุจุฉ

## ๐ ุฃุญุฏุงุซ WebSocket

### ุงุชุตุงู ุงูุบุฑู

```javascript
// ุงูุงูุถูุงู ูุบุฑูุฉ
socket.emit('join_room', {
    room_code: 'ABC123',
    password: 'optional'
});

// ูุบุงุฏุฑุฉ ุงูุบุฑูุฉ
socket.emit('leave_room');

// ุชุนููู ุงูุงุณุชุนุฏุงุฏ
socket.emit('set_ready', { ready: true });
```

### ุงููุนุจุฉ

```javascript
// ุจุฏุก ุงููุนุจุฉ
socket.emit('start_game');

// ุชูููุฐ ุฅุฌุฑุงุก
socket.emit('submit_action', {
    action_type: 'kill',
    target_id: 123
});

// ุงูุชุตููุช
socket.emit('cast_vote', { target_id: 123 });
```

### ุงูุฏุฑุฏุดุฉ

```javascript
// ุฅุฑุณุงู ุฑุณุงูุฉ
socket.emit('send_message', {
    content: 'ูุฑุญุจุง ุจุงูุฌููุน!',
    message_type: 'text'
});

// ุฅุฑุณุงู ุฑุณุงูุฉ ุตูุชูุฉ
socket.emit('voice_message', {
    audio_data: 'base64_encoded_audio',
    duration: 5.2
});
```

## ๐ค ุงูุฐูุงุก ุงูุงุตุทูุงุนู

### ุชุญููู ุงูุฑุณุงุฆู

ุงููุธุงู ูุญูู ุชููุงุฆูุงู:
- ูุดู ุงูุฃุฏูุงุฑ ูู ุงูุฏุฑุฏุดุฉ
- ุงููุญุชูู ุบูุฑ ุงูููุงุณุจ
- ูุญุงููุงุช ุงูุชูุงุตู ุงูุฎุงุฑุฌู
- ุงูุชูุงุนุจ ูู ุงูุชุตููุช
- ุชุฎุฑูุจ ุงููุนุจุฉ

### ุชุญููู ุงูุตูุช ุฅูู ูุต

```python
# ูุชู ุชููุงุฆูุงู ุนูุฏ ุฅุฑุณุงู ุฑุณุงุฆู ุตูุชูุฉ
transcription = speech_to_text.transcribe(audio_file_path)
```

### ุชุญููู ุงูุฃุฏุงุก

```python
# ุชุญููู ุฃุฏุงุก ูุงุนุจ
analysis = game_analyzer.analyze_player_behavior(player_id, game_id)

# ุชูุฑูุฑ ุดุงูู ููุงุนุจ
report = stats_analyzer.generate_player_report(user_id)
```

## ๐ญ ุงูุฃุฏูุงุฑ ูู ุงููุนุจุฉ

### ๐ฅ ุงูููุงุทููู

1. **ููุงุทู ุนุงุฏู** - ูุตูุช ูุฅุนุฏุงู ุงููุงููุง
2. **ุทุจูุจ** - ูุญูู ูุงุนุจุงู ูุงุญุฏุงู ูู ูููุฉ
3. **ูุญูู** - ูุชุญูู ูู ูููุฉ ูุงุนุจ ูู ูููุฉ
4. **ุนุฏุงูุฉ ุดุนุจูุฉ** - ููุชู ูุงุนุจุงู ูุงุญุฏุงู ูู ูููุฉ
5. **ุนูุฏุฉ** - ุตูุชู ูุญุณุจ ุจุตูุชูู
6. **ููุฑุฌ** - ูููุฒ ุฅุฐุง ุชู ุฅุนุฏุงูู

### ๐ค ุงููุงููุง

- **ูุงููุง** - ููุชู ุงูููุงุทููู ูููุงู ููุญุงูู ุงูุจูุงุก ูุฎููุงู

## ๐ ูุธุงู ุงูุฅุญุตุงุฆูุงุช

### ุฅุญุตุงุฆูุงุช ุดุฎุตูุฉ

- ุฅุฌูุงูู ุงูุฃูุนุงุจ ูุงูุงูุชุตุงุฑุงุช
- ูุนุฏู ุงูุจูุงุก
- ุฃุฏุงุก ูู ุฏูุฑ
- ุฏูุฉ ุงูุชุตููุช
- ุชุญููู ุงูุณููู

### ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ

- ุงุชุฌุงูุงุช ุงูุฃุฏุงุก
- ุงูุชุญููู ุงูููุณู
- ูุตุงุฆุญ ููุชุญุณูู
- ููุงุฑูุฉ ูุน ุงููุงุนุจูู ุงูุขุฎุฑูู

## ๐ก๏ธ ุงูุฃูุงู ูููุงูุญุฉ ุงูุบุด

### ุงููุดู ุงูุชููุงุฆู

- ุชุญููู ุงููุญุงุฏุซุงุช ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ูุดู ูุดู ุงูุฃุฏูุงุฑ
- ูุฑุงูุจุฉ ุงูุชูุงุตู ุงูุฎุงุฑุฌู
- ุชุชุจุน ุงูุฃููุงุท ุงููุดุจููุฉ

### ุงูุฅุฌุฑุงุกุงุช ุงูุชููุงุฆูุฉ

- ุฅุฎูุงุก ุงูุฑุณุงุฆู ุงููุฎุงููุฉ
- ุชุญุฐูุฑุงุช ูููุดุฑููู
- ููุงุท ุงูุดู ููุงุนุจูู

## ๐ง ุงูุชุทููุฑ ูุงููุณุงููุฉ

### ุฅุถุงูุฉ ุฏูุฑ ุฌุฏูุฏ

1. ุชุญุฏูุซ `PlayerRole` ูู `models/player.py`
2. ุฅุถุงูุฉ ููุทู ุงูุฏูุฑ ูู `game/role_manager.py`
3. ุชุญุฏูุซ ุชูุฒูุน ุงูุฃุฏูุงุฑ ูู `RoleDistribution`

### ุฅุถุงูุฉ ุชุญููู ุฌุฏูุฏ

1. ุชุญุฏูุซ `MessageAnalyzer` ูู `ai/message_analyzer.py`
2. ุฅุถุงูุฉ ุฃููุงุท ุฌุฏูุฏุฉ ูู `suspicious_patterns`
3. ุชุญุฏูุซ ููุทู ุงูุชุญููู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

1. **ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช**
   ```
   ุชุฃูุฏ ูู ุชุดุบูู MySQL ูุตุญุฉ ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู ูู .env
   ```

2. **ูุดู ูู ุชุญููู ุงูุตูุช ุฅูู ูุต**
   ```
   ุชุฃูุฏ ูู ุตุญุฉ ููุชุงุญ OpenAI API
   ```

3. **ูุดุงูู ูู WebSocket**
   ```
   ุชุฃูุฏ ูู ุนุฏู ุญุฌุจ ุงูููุงูุฐ ูุงูุณูุงุญ ููุงุชุตุงูุงุช
   ```

### ุณุฌูุงุช ุงููุธุงู

```bash
# ูุฑุงูุจุฉ ุงูุณุฌูุงุช
tail -f app.log

# ูุญุต ุญุงูุฉ ุงููุธุงู
curl http://localhost:5000/health
```

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ููุชุงุญ ููุงุณุชุฎุฏุงู ุงูุชุนูููู ูุงูุชุฌุงุฑู.

## ๐ค ุงูุฏุนู ูุงููุณุงููุฉ

ููุฅุจูุงุบ ุนู ูุดุงูู ุฃู ุทูุจ ููุฒุงุช ุฌุฏูุฏุฉุ ูุฑุฌู ุฅูุดุงุก issue ูู ุงููุณุชูุฏุน.

---

**ุชู ุชุทููุฑ ูุฐุง ุงููุดุฑูุน ุจู โค๏ธ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุจูุงุณุทุฉ ูุตุฑ ุงูุฏูู**

*ุขุฎุฑ ุชุญุฏูุซ: 26 ูููููุฒ 2025*